[gd_scene load_steps=12 format=3 uid="uid://dfgsbnatkyqsl"]

[ext_resource type="Script" path="res://Scripts/Towers/Tower Scripts/ThornWall.gd" id="1_dftyv"]
[ext_resource type="Texture2D" uid="uid://dmr3xxaqx0hv6" path="res://Art Assets/Textures/Stem.png" id="3_ccu5t"]
[ext_resource type="Script" path="res://Scripts/Units/Attack Scripts/UnitAttack.gd" id="3_jv5v0"]
[ext_resource type="Texture2D" uid="uid://nw88hgtaqq32" path="res://Art Assets/Textures/Head.png" id="4_b1sa7"]
[ext_resource type="PackedScene" uid="uid://drh5slfmagly0" path="res://Scenes/Units/HealthBar.tscn" id="5_xsclh"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_yvunn"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_cj6o5"]

[sub_resource type="Animation" id="Animation_tqe2w"]
resource_name = "Attack"
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("SkeletonParent/Skeleton2D/Spine1:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.3, 1),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [0.269398, 0.7643, 0.269398]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("SkeletonParent/Skeleton2D/Spine1/Spine2:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.3, 0.6, 1),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 0,
"values": [-0.325119, -1.4618, -0.948885, -0.325119]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("SkeletonParent/Skeleton2D/Spine1/Spine2/Spine3:rotation")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 0.3, 0.6, 1),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 0,
"values": [-0.24491, -1.43463, -1.3768, -0.24491]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("SkeletonParent/Skeleton2D/Spine1/Spine2/Spine3/Head:rotation")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0, 0.3, 1),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [0.13202, 1.36491, 0.13202]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("SkeletonParent/Skeleton2D/Spine1/Spine2/Spine3/Head/Jaw:rotation")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0, 0.3, 0.6, 1),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 0,
"values": [0.0, -0.200817, 0.0314159, 0.0]
}
tracks/5/type = "value"
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/path = NodePath("SkeletonParent/Skeleton2D/Spine1/Spine2/Spine3/Head/UpperJaw:rotation")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/keys = {
"times": PackedFloat32Array(0, 0.3, 0.6, 1),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 0,
"values": [0.0, 0.483456, -0.0336823, 0.0]
}
tracks/6/type = "value"
tracks/6/imported = false
tracks/6/enabled = false
tracks/6/path = NodePath("SkeletonParent/Skeleton2D/Spine1/Spine2/Spine3/Head/Jaw:position")
tracks/6/interp = 1
tracks/6/loop_wrap = true
tracks/6/keys = {
"times": PackedFloat32Array(0, 0.3, 0.5, 0.6, 1),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1),
"update": 0,
"values": [Vector2(4.07347, 10.2862), Vector2(3.0028, 16.018), Vector2(-9.03878, 16.0367), Vector2(3.877, 12.41), Vector2(4.07347, 10.2862)]
}
tracks/7/type = "value"
tracks/7/imported = false
tracks/7/enabled = false
tracks/7/path = NodePath("SkeletonParent/Skeleton2D/Spine1/Spine2/Spine3/Head/UpperJaw:position")
tracks/7/interp = 1
tracks/7/loop_wrap = true
tracks/7/keys = {
"times": PackedFloat32Array(0, 0.3, 0.5, 0.6, 1),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1),
"update": 0,
"values": [Vector2(0, -6), Vector2(2.88009, -9.47679), Vector2(-8.58353, -11.6181), Vector2(-2.942, -2.15), Vector2(0, -6)]
}
tracks/8/type = "value"
tracks/8/imported = false
tracks/8/enabled = true
tracks/8/path = NodePath("SkeletonParent/Skeleton2D/Spine1/Spine2/Spine3/Head:position")
tracks/8/interp = 1
tracks/8/loop_wrap = true
tracks/8/keys = {
"times": PackedFloat32Array(0, 0.3, 0.6),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(2.675, -42), Vector2(7.575, -34.565), Vector2(9.455, -37.751)]
}

[sub_resource type="Animation" id="Animation_o33mj"]
resource_name = "Idle"
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("SkeletonParent/Skeleton2D/Spine1:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.5, 1),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [0.269398, 0.473506, 0.269398]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("SkeletonParent/Skeleton2D/Spine1/Spine2:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.5, 1),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [-0.325119, -0.524062, -0.325119]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("SkeletonParent/Skeleton2D/Spine1/Spine2/Spine3:rotation")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 0.5, 1),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [-0.24491, -0.479556, -0.24491]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("SkeletonParent/Skeleton2D/Spine1/Spine2/Spine3/Head:rotation")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0, 0.5, 1),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [0.13202, 0.345885, 0.13202]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("SkeletonParent/Skeleton2D/Spine1/Spine2/Spine3/Head/Jaw:rotation")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0, 1),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [0.0, 0.0]
}
tracks/5/type = "value"
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/path = NodePath("SkeletonParent/Skeleton2D/Spine1/Spine2/Spine3/Head/UpperJaw:rotation")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/keys = {
"times": PackedFloat32Array(0, 1),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [0.0, 0.0]
}

[sub_resource type="Animation" id="Animation_wrkvx"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("SkeletonParent/Skeleton2D/Spine1:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.476491]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("SkeletonParent/Skeleton2D/Spine1/Spine2:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [-1.13185]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("SkeletonParent/Skeleton2D/Spine1/Spine2/Spine3:rotation")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [-1.43463]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("SkeletonParent/Skeleton2D/Spine1/Spine2/Spine3/Head:rotation")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [1.36491]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("SkeletonParent/Skeleton2D/Spine1/Spine2/Spine3/Head/Jaw:rotation")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}
tracks/5/type = "value"
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/path = NodePath("SkeletonParent/Skeleton2D/Spine1/Spine2/Spine3/Head/UpperJaw:rotation")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}
tracks/6/type = "value"
tracks/6/imported = false
tracks/6/enabled = true
tracks/6/path = NodePath("SkeletonParent/Skeleton2D/Spine1/Spine2/Spine3/Head/Jaw:position")
tracks/6/interp = 1
tracks/6/loop_wrap = true
tracks/6/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(4.07347, 10.2862)]
}
tracks/7/type = "value"
tracks/7/imported = false
tracks/7/enabled = true
tracks/7/path = NodePath("SkeletonParent/Skeleton2D/Spine1/Spine2/Spine3/Head/UpperJaw:position")
tracks/7/interp = 1
tracks/7/loop_wrap = true
tracks/7/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(2.88009, -9.47679)]
}
tracks/8/type = "value"
tracks/8/imported = false
tracks/8/enabled = true
tracks/8/path = NodePath("SkeletonParent/Skeleton2D/Spine1/Spine2/Spine3/Head:position")
tracks/8/interp = 1
tracks/8/loop_wrap = true
tracks/8/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(2.675, -42)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_xc537"]
_data = {
"Attack": SubResource("Animation_tqe2w"),
"Idle": SubResource("Animation_o33mj"),
"RESET": SubResource("Animation_wrkvx")
}

[node name="FlytrapCluster" type="StaticBody2D" groups=["PlayerUnits"]]
collision_layer = 4
script = ExtResource("1_dftyv")
health = 450.0

[node name="Attack" type="Node2D" parent="."]
script = ExtResource("3_jv5v0")
attackDamage = 7.0
timePerAttack = 0.83
numberOfTargets = 3
groupToAttack = "EnemyUnits"

[node name="AttackArea" type="Area2D" parent="."]
collision_mask = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="AttackArea"]
position = Vector2(-20, -70)
scale = Vector2(6, 7)
shape = SubResource("RectangleShape2D_yvunn")

[node name="Hitbox" type="CollisionShape2D" parent="."]
position = Vector2(0, -70)
scale = Vector2(4, 7)
shape = SubResource("RectangleShape2D_cj6o5")

[node name="SkeletonParent" type="Node2D" parent="."]

[node name="Parts" type="Node2D" parent="SkeletonParent"]

[node name="Stem" type="Polygon2D" parent="SkeletonParent/Parts"]
scale = Vector2(0.229917, 0.229917)
offset = Vector2(-116.285, -579.195)
texture = ExtResource("3_ccu5t")
skeleton = NodePath("../../Skeleton2D")
polygon = PackedVector2Array(56, 472, 56, 504, 56, 544, 72, 568, 96, 584, 128, 584, 168, 576, 176, 544, 176, 504, 184, 464, 176, 440, 168, 408, 168, 368, 160, 344, 144, 312, 144, 280, 144, 256, 144, 216, 136, 184, 136, 160, 144, 120, 136, 96, 136, 72, 128, 48, 104, 48, 88, 64, 80, 104, 80, 144, 80, 176, 64, 184, 64, 216, 72, 224, 64, 248, 64, 264, 80, 296, 80, 312, 64, 336, 64, 360, 72, 376, 56, 400, 32, 416, 32, 440, 48, 456)
uv = PackedVector2Array(56, 472, 56, 504, 56, 544, 72, 568, 96, 584, 128, 584, 168, 576, 176, 544, 176, 504, 184, 464, 176, 440, 168, 408, 168, 368, 160, 344, 144, 312, 144, 280, 144, 256, 144, 216, 136, 184, 136, 160, 144, 120, 136, 96, 136, 72, 128, 48, 104, 48, 88, 64, 80, 104, 80, 144, 80, 176, 64, 184, 64, 216, 72, 224, 64, 248, 64, 264, 80, 296, 80, 312, 64, 336, 64, 360, 72, 376, 56, 400, 32, 416, 32, 440, 48, 456)
polygons = [PackedInt32Array(4, 3, 7, 6, 5), PackedInt32Array(3, 2, 8, 7), PackedInt32Array(2, 1, 8), PackedInt32Array(1, 0, 9, 8), PackedInt32Array(0, 42, 10, 9), PackedInt32Array(42, 41, 11, 10), PackedInt32Array(41, 40, 11), PackedInt32Array(40, 39, 11), PackedInt32Array(39, 38, 12, 11), PackedInt32Array(38, 37, 13, 12), PackedInt32Array(37, 36, 14, 13), PackedInt32Array(36, 35, 14), PackedInt32Array(35, 34, 15, 14), PackedInt32Array(34, 33, 16, 15), PackedInt32Array(33, 32, 17, 16), PackedInt32Array(32, 31, 17), PackedInt32Array(31, 30, 29, 18, 17), PackedInt32Array(29, 28, 19, 18), PackedInt32Array(28, 27, 20, 19), PackedInt32Array(27, 26, 21, 20), PackedInt32Array(26, 25, 24, 23, 22, 21)]
bones = ["Spine1", PackedFloat32Array(0.6, 0.8, 1, 1, 1, 1, 1, 1, 0.8, 0.6, 0.4, 0.2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.2, 0.2, 0.4, 0.6), "Spine1/Spine2", PackedFloat32Array(0.4, 0.4, 0.2, 0, 0, 0, 0, 0.2, 0.2, 0.4, 0.6, 0.6, 0.6, 0.8, 1, 1, 0.8, 0.6, 0.2, 0.2, 0, 0, 0, 0, 0, 0, 0, 0, 0.2, 0.2, 0.6, 0.6, 0.8, 1, 1, 1, 1, 0.8, 0.6, 0.8, 0.8, 0.6, 0.6), "Spine1/Spine2/Spine3", PackedFloat32Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.2, 0.4, 0.6, 0.8, 1, 1, 1, 1, 1, 1, 1, 0.8, 0.6, 0.6, 0.4, 0.4, 0.2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0), "Spine1/Spine2/Spine3/Head", PackedFloat32Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0), "Spine1/Spine2/Spine3/Head/Jaw", PackedFloat32Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0), "Spine1/Spine2/Spine3/Head/UpperJaw", PackedFloat32Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0)]

[node name="Head" type="Polygon2D" parent="SkeletonParent/Parts"]
scale = Vector2(0.119544, 0.119544)
offset = Vector2(-369.845, -1172.95)
texture = ExtResource("4_b1sa7")
skeleton = NodePath("../../Skeleton2D")
polygon = PackedVector2Array(368, 240, 392, 200, 392, 160, 368, 96, 296, 40, 208, 8, 128, 16, 48, 88, 32, 152, 72, 184, 120, 184, 112, 224, 64, 224, 40, 248, 32, 280, 32, 304, 88, 328, 192, 344, 280, 320, 352, 264)
uv = PackedVector2Array(368, 240, 392, 200, 392, 160, 368, 96, 296, 40, 208, 8, 128, 16, 48, 88, 32, 152, 72, 184, 120, 184, 112, 224, 64, 224, 40, 248, 32, 280, 32, 304, 88, 328, 192, 344, 280, 320, 352, 264)
polygons = [PackedInt32Array(10, 2, 3, 4, 5, 6, 7, 8, 9), PackedInt32Array(15, 16, 17, 18, 19, 0, 11, 12, 13, 14), PackedInt32Array(10, 11, 0, 1, 2)]
bones = ["Spine1", PackedFloat32Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0), "Spine1/Spine2", PackedFloat32Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0), "Spine1/Spine2/Spine3", PackedFloat32Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0), "Spine1/Spine2/Spine3/Head", PackedFloat32Array(1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0), "Spine1/Spine2/Spine3/Head/Jaw", PackedFloat32Array(1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1), "Spine1/Spine2/Spine3/Head/UpperJaw", PackedFloat32Array(0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0)]

[node name="Skeleton2D" type="Skeleton2D" parent="SkeletonParent"]
visible = false

[node name="Spine1" type="Bone2D" parent="SkeletonParent/Skeleton2D"]
rotation = 0.476491
rest = Transform2D(1, 0, 0, 1, 0, 0)

[node name="Spine2" type="Bone2D" parent="SkeletonParent/Skeleton2D/Spine1"]
position = Vector2(0, -39)
rotation = -1.13185
scale = Vector2(1, 1)
rest = Transform2D(1, 0, 0, 1, 0, -39)

[node name="Spine3" type="Bone2D" parent="SkeletonParent/Skeleton2D/Spine1/Spine2"]
position = Vector2(0, -45)
rotation = -1.43463
rest = Transform2D(1, 0, 0, 1, 0, -45)

[node name="Head" type="Bone2D" parent="SkeletonParent/Skeleton2D/Spine1/Spine2/Spine3"]
position = Vector2(2.675, -42)
rotation = 1.36491
rest = Transform2D(1, 0, 0, 1, 0, -43)

[node name="Jaw" type="Bone2D" parent="SkeletonParent/Skeleton2D/Spine1/Spine2/Spine3/Head"]
position = Vector2(4.07347, 10.2862)
rest = Transform2D(1, 0, 0, 1, 0, 15)
auto_calculate_length_and_angle = false
length = 29.461
bone_angle = -180.0

[node name="UpperJaw" type="Bone2D" parent="SkeletonParent/Skeleton2D/Spine1/Spine2/Spine3/Head"]
position = Vector2(2.88009, -9.47679)
rest = Transform2D(1, 0, 0, 1, 0, -6)
auto_calculate_length_and_angle = false
length = 36.191
bone_angle = -180.0

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_xc537")
}
playback_default_blend_time = 0.2

[node name="HealthBar" parent="." instance=ExtResource("5_xsclh")]
position = Vector2(0, 40)
scale = Vector2(0.15, 0.15)

[connection signal="ready" from="." to="AnimationPlayer" method="play" binds= ["Idle"]]
[connection signal="StartedAttacking" from="Attack" to="AnimationPlayer" method="play" binds= ["Attack"]]
[connection signal="StoppedAttacking" from="Attack" to="AnimationPlayer" method="play" binds= ["Idle"]]
[connection signal="body_entered" from="AttackArea" to="Attack" method="_on_attack_area_body_entered"]
[connection signal="body_exited" from="AttackArea" to="Attack" method="_on_attack_area_body_exited"]
